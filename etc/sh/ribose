#! /bin/bash
vmargs=""
while [[ "$1" =~ ^[-][^-] ]]; do
	vmargs="$vmargs $1";
	shift
done
nil=""
if [[ "$1" == "--nil" ]]; then
  nil="$1"
  shift
fi
target="com.characterforming.ribose.TRun"
if [[ "$1" == "--target" ]]; then
  target="$2"
  shift 2
fi
if (($#!=3)); then
	echo "Usage:\tribose [<vm-arg> ...] [--nil] [--target <target-class-name>] <transducer> <input-file> <model-file>"
  echo "Default target is com.characterforming.ribose.TRun"
else
  transducer="$1"
  infile="$2"
  model="$3"
  jars=$(dirname $(readlink -f $0))/../../jars
	java -cp $jars/ribose-0.0.0.jar com.characterforming.ribose.TRun $nil $target $transducer "$infile" "$model"
fi

